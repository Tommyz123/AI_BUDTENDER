---
name: todolist-reviewer
description: 审核开发任务清单（TODOLIST.md），检查是否符合 SPEC 规则，验证每个 Task 完整性。
allowed-tools: Read, Grep, Glob
---

# 审核开发任务清单

## 执行步骤

1. 读取 TODOLIST.md
2. 读取 PROJECT_PLAN.md（用于对齐验证）
3. 执行结构规则检查（SPEC.md T-S1~S6）
4. 执行 Task 规则检查（SPEC.md T-T1~T8）- **逐Task验证**
5. 执行初始状态检查（SPEC.md T-I1~I4）
6. 执行依赖规则检查（SPEC.md T-D1~D4）
7. 执行6维度评分
8. 输出审核报告

## 第一步：结构规则检查（必须先执行）

按照 SPEC.md 2.1 检查6个必需章节：

| 规则ID | 章节 | 结果 | 证据 |
|--------|------|------|------|
| T-S1 | 进度追踪 | ✅/❌ | 引用章节标题 |
| T-S2 | 任务依赖关系 | ✅/❌ | 引用章节标题 |
| T-S3 | 任务详情 | ✅/❌ | 引用章节标题 |
| T-S4 | 首次执行指令 | ✅/❌ | 引用章节标题 |
| T-S5 | 工具说明 | ✅/❌ | 引用章节标题 |
| T-S6 | 注意事项 | ✅/❌ | 引用章节标题 |

**⚠️ 任何一项 ❌ → P0 问题，记录后停止后续检查**

结构不完整时，Task 审核无意义。直接输出审核报告，建议使用 todolist-fixer 修复。

## 第二步：Task 规则检查（最重要）

**必须逐个 Task 验证**，按照 SPEC.md 2.2 检查每个部分：

### Task 1 检查

| 规则ID | 部分 | 结果 | 证据（引用原文前20字） |
|--------|------|------|----------------------|
| T-T1 | 功能要求 ≥ 3条 | ✅/❌ | "{引用内容}..." |
| T-T2 | 实现位置有路径 | ✅/❌ | "{引用内容}..." |
| T-T3 | 代码审核有命令 | ✅/❌ | "{引用内容}..." |
| T-T4 | 测试验证有用例 | ✅/❌ | "{引用内容}..." |
| T-T5 | 验收标准 | ✅/❌ | "{引用内容}..." |
| T-T6 | 完成后必须执行 | ✅/❌ | "{引用内容}..." |

### Task 2 检查
（同上格式，逐个检查）

### Task N 检查
...

**每个 Task 有任何一项 ❌ → P0 问题**

## 第三步：初始状态检查

按照 SPEC.md 2.3 检查：

| 规则ID | 规则 | 结果 | 证据 |
|--------|------|------|------|
| T-I1 | 进度 = 0% | ✅/❌ | 引用进度显示 |
| T-I2 | 所有Task状态="未开始" | ✅/❌ | 检查每个Task |
| T-I3 | 进度条显示0% | ✅/❌ | 引用进度条 |
| T-I4 | checkbox未勾选 | ✅/❌ | 检查`[ ]`vs`[x]` |

**任何一项 ❌ → P0 问题**

## 第四步：依赖规则检查

按照 SPEC.md 2.4 检查：

| 规则ID | 规则 | 结果 | 证据 |
|--------|------|------|------|
| T-D1 | 无依赖Task排最前 | ✅/❌ | Task 1的依赖 |
| T-D2 | 依赖项在前 | ✅/❌ | 验证顺序 |
| T-D3 | 无循环依赖 | ✅/❌ | 依赖图分析 |
| T-D4 | 依赖编号有效 | ✅/❌ | 检查引用 |

## 审核规则

1. **每个检查项必须引用原文证据**
2. **Task 检查必须逐个进行，不能跳过**
3. **无法找到内容 = ❌，不能假设存在**
4. **禁止：声称检查通过但不引用证据**

## 问题分级

| 级别 | 条件 |
|------|------|
| P0 | 缺少必需章节、Task缺少必需部分、初始状态错误、依赖错误 |
| P1 | 内容过于简略、格式问题 |
| P2 | 优化建议 |

## 6维度评分

按照 SPEC.md 3.2 评分：

| 维度 | 权重 | 得分 | 评价 |
|------|------|------|------|
| 三方对齐度 | 20 | {X} | {评价} |
| Task依赖正确性 | 20 | {X} | {评价} |
| Task粒度合理性 | 15 | {X} | {评价} |
| Task完整性 | 15 | {X} | {评价} |
| 质量保障可行性 | 15 | {X} | {评价} |
| 可执行性 | 15 | {X} | {评价} |
| **总分** | 100 | {SUM} | - |

## 评分标准

| 评分 | 结果 | 建议 |
|------|------|------|
| ≥ 90 | ✅ 通过 | 可以开始开发 |
| 80-89 | ⚠️ 接近 | 修复 P0 后重审 |
| < 80 | ❌ 未通过 | 使用 todolist-fixer 修复或重新生成 |

## 输出格式

**审核报告文件名**: `TODOLIST_REVIEW.md`

见 [templates/review-report.md](./templates/review-report.md)
