---
name: project-plan-reviewer
description: 审核项目计划书（PROJECT_PLAN.md），检查是否符合 SPEC 规则，输出评分和问题列表。
allowed-tools: Read, Grep, Glob
---

# 审核项目计划书

## 执行步骤

1. 读取 PROJECT_PLAN.md
2. 读取需求文档（用于对齐验证）
3. 执行结构规则检查（SPEC.md P-S1~S6）
4. 执行内容规则检查（SPEC.md P-C1~C6）
5. 执行评估规则检查（SPEC.md P-E1~E4）
6. 执行7维度评分
7. 输出审核报告

## 第一步：结构规则检查（必须先执行）

按照 SPEC.md 1.1 逐条检查：

| 规则ID | 规则 | 结果 | 证据 |
|--------|------|------|------|
| P-S1~S3 | 维度数量正确 | ✅/❌ | "共{N}个维度" |
| P-S4 | 维度9="测试与验证策略" | ✅/❌ | 引用维度9标题 |
| P-S5 | 有"初步可行性评估" | ✅/❌ | 引用章节标题 |
| P-S6 | 有"生成信息" | ✅/❌ | 引用章节标题 |

**⚠️ 任何一项 ❌ → P0 问题，记录后停止后续检查**

结构不完整时，内容审核无意义。直接输出审核报告，建议使用 project-plan-fixer 修复。

## 第二步：内容规则检查

按照 SPEC.md 1.3 逐条检查：

| 规则ID | 规则 | 结果 | 证据 |
|--------|------|------|------|
| P-C1 | 技术选型无"A/B"写法 | ✅/❌ | 搜索结果 |
| P-C2 | 替代方案在备注列 | ✅/❌ | 表格结构 |
| P-C3 | 核心模块 ≥ 3 | ✅/❌ | 模块列表 |
| P-C4 | 每模块有扩展点 | ✅/❌ | 扩展点数量 |
| P-C5 | TODO ≤ 10 | ✅/❌ | TODO数量 |
| P-C6 | 占位符 ≤ 5% | ✅/❌ | 占位符数量 |

## 第三步：评估规则检查

按照 SPEC.md 1.4 检查：

| 规则ID | 规则 | 结果 | 证据 |
|--------|------|------|------|
| P-E1 | 有"需求完整度"评分 | ✅/❌ | 引用评分 |
| P-E2 | 有"技术可行性"评分 | ✅/❌ | 引用评分 |
| P-E3 | 有"资源充足度"评分 | ✅/❌ | 引用评分 |
| P-E4 | 有"综合评分" | ✅/❌ | 引用评分 |

**任何一项 ❌ → P0 问题**

## 第四步：7维度评分

按照 SPEC.md 3.1 评分：

| 维度 | 权重 | 得分 | 评价 |
|------|------|------|------|
| 需求对齐度 | 15 | {X} | {评价} |
| 架构设计质量 | 20 | {X} | {评价} |
| 技术方案完整性 | 15 | {X} | {评价} |
| 命名一致性 | 10 | {X} | {评价} |
| 可执行性 | 20 | {X} | {评价} |
| 测试验证完备性 | 10 | {X} | {评价} |
| 文档质量 | 10 | {X} | {评价} |
| **总分** | 100 | {SUM} | - |

## 审核规则

1. 每个检查项必须引用原文证据
2. 无法找到证据 → 标记为 ❌
3. 禁止：直接打 ✅ 而不引用证据

## 问题分级

| 级别 | 条件 |
|------|------|
| P0 | 结构规则(P-S)失败、评估规则(P-E)失败、技术选型模糊 |
| P1 | 内容规则(P-C)失败、TODO过多、模块不完整 |
| P2 | 格式问题、优化建议 |

## 评分标准

| 评分 | 结果 | 建议 |
|------|------|------|
| ≥ 90 | ✅ 通过 | 进入 todolist-generator |
| 80-89 | ⚠️ 接近 | 修复 P0 后重审 |
| < 80 | ❌ 未通过 | 使用 project-plan-fixer 或重新生成 |

## 输出格式

**审核报告文件名**: `PROJECT_PLAN_REVIEW.md`

见 [templates/review-report.md](./templates/review-report.md)
